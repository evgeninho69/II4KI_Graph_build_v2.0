# Архитектурные, нормативные и технические правила разработки SVG/HTML-модуля

## Общие архитектурные принципы
- **Rule 1.1:** Использовать *только* web-ориентированные технологии – генерировать графику как HTML/SVG. Исключить DXF, PDF и растровые форматы. Модуль должен быть модульным: выделять компоненты (рендеринг, генерацию подписей, работу с данными и т.д.) в отдельные файлы/классы.
- **Rule 1.2:** Установить единую структуру файлов и имен. Согласовать названия выходных HTML-файлов и шаблонов по единому стандарту (например, `SGP.html`, `CH.html`, `SRZU.html`).

## Нормативные требования (межевой план, пункты 70–80)
- **Rule 2.1:** Обозначения ЗУ и их частей должны соответствовать п. 78–79 требований:contentReference[oaicite:0]{index=0}:contentReference[oaicite:1]{index=1}. Например: `:123` (исходный участок), `:123:ЗУ1` (новый участок при разделе), `:123/5` (существующая часть) или `:123/чзу1` (новая часть):contentReference[oaicite:2]{index=2}:contentReference[oaicite:3]{index=3}.
- **Rule 2.2:** Исходные ЗУ, прекращаемые части и исчезающие характерные точки границ отображать курсивом с подчёркиванием:contentReference[oaicite:4]{index=4}.
- **Rule 2.3:** Применять специальные условные знаки по нормам:contentReference[oaicite:5]{index=5}. Характерные точки границ рисовать кружками Ø 1,5 мм с заливкой: **чёрным** – существующие (ЕГРН в норме), **красным** – новые, **пустым контуром** – если сведения ЕГРН неясны:contentReference[oaicite:6]{index=6}:contentReference[oaicite:7]{index=7}. Части границы – линиями толщиной 0,2 мм: **сплошная чёрная** – установленные ЕГРН, **сплошная красная** (или чёрная с красным маркером) – уточнённые при съёмке, **пунктирная** – неустановленные:contentReference[oaicite:8]{index=8}:contentReference[oaicite:9]{index=9}:contentReference[oaicite:10]{index=10}.
- **Rule 2.4:** Масштабировать так, чтобы подписи и точки были читаемы (минимальный размер шрифта – около 7 pt). Если чертёж не помещается на лист А3, разбивать его на несколько листов с выносными отметками/врезками:contentReference[oaicite:11]{index=11}:contentReference[oaicite:12]{index=12}.
- **Rule 2.5:** Легенда должна содержать все использованные условные знаки. Автоматически включать в легенду символы и цвета, указанные в приложении к нормативам:contentReference[oaicite:13]{index=13}.

## Стандартизованные перечисления и структуры
- **Rule 3.1:** Определить стандартные enum/struct для статусов и операций: `ParcelStatus`, `BoundaryStatus`, `PointStatus`, `OperationType` и пр., чтобы код ясно различал исходные/новые участки, части, точки и типы операций (раздел, выдел, объединение и т.д.). Ввести структуру `SVGStyles` (цвета, толщины линий, шрифты) по условным знакам.

## Правила построения листов
- **Rule 4.1:** **Схема геодезических построений (СГП):** отображает схематичное изображение участка и прилегающих пунктов геодезической сети/съёмки, направления геодезических построений и поясняющие надписи:contentReference[oaicite:14]{index=14}:contentReference[oaicite:15]{index=15}.
- **Rule 4.2:** **Схема расположения объекта (SRZU):** показывает границы ЗУ и его частей, контур здания (или объекта) внутри ЗУ и дополнительные ориентиры (улицы, соседние участки):contentReference[oaicite:16]{index=16}:contentReference[oaicite:17]{index=17}.
- **Rule 4.3:** **Чертеж (Ч):** главный план границ ЗУ. Должен содержать все существующие, новые и прекращаемые характерные точки и части границы, а также подписи ЗУ, частей и точек (см. Rule 2.1):contentReference[oaicite:18]{index=18}. Исходные ЗУ и части – курсивом с подчёркиванием:contentReference[oaicite:19]{index=19}.
- **Rule 4.4:** Условные обозначения оформлять по нормам. Проверять, что все используемые цвета и символы согласованы с приложением нормативов и присутствуют в легенде:contentReference[oaicite:20]{index=20}:contentReference[oaicite:21]{index=21}.

## Автоматизация масштабирования и разбиения
- **Rule 5.1:** Автоматически подбирать масштаб так, чтобы тексты (~7 pt) и символы были читаемы и не перекрывались.
- **Rule 5.2:** Если контент выходит за пределы листа A3, разбивать чертёж на листы по близости точек. Алгоритм разбиения должен создавать выноски/врезки между листами (см. Rule 2.4).

## Работа с данными
- **Rule 6.1:** Получать данные о ЗУ и границах через согласованный JSON-контракт и запросы к БД (PostgreSQL/PostGIS). Для тестирования поддерживать импорт из TXT/XML по тому же контракту. Не хранить координаты непосредственно в коде – использовать базу или контракты.

## Тестирование и QA
- **Rule 7.1:** Валидировать корректность подписей и элементов. Использовать snapshot-тесты SVG: для типовых операций (раздел, объединение и т.д.) сравнивать полученные SVG с эталонными. Проверять наличие всех обязательных элементов (границы, точки, подписи) на каждом листе:contentReference[oaicite:22]{index=22}:contentReference[oaicite:23]{index=23}.
